var ut=s=>{throw TypeError(s)};var _e=(s,e,t)=>e.has(s)||ut("Cannot "+t);var i=(s,e,t)=>(_e(s,e,"read from private field"),t?t.call(s):e.get(s)),v=(s,e,t)=>e.has(s)?ut("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),c=(s,e,t,r)=>(_e(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t),b=(s,e,t)=>(_e(s,e,"access private method"),t);var qe=(s,e,t,r)=>({set _(n){c(s,e,n,t)},get _(){return i(s,e,r)}});import{r as F,j as Kt}from"./react-rfUEOKBT.js";import{r as Lt}from"./react-dom-CWvG3IXd.js";/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ke(){return ke=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},ke.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ke(){return Ke=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},Ke.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function de(s,e,t){var r,n=(r=t.initialDeps)!=null?r:[],a;return function(){var o;t.key&&t.debug!=null&&t.debug()&&(o=Date.now());var u=s(),l=u.length!==n.length||u.some(function(C,f){return n[f]!==C});if(!l)return a;n=u;var d;if(t.key&&t.debug!=null&&t.debug()&&(d=Date.now()),a=e.apply(void 0,u),t.key&&t.debug!=null&&t.debug()){var m=Math.round((Date.now()-o)*100)/100,h=Math.round((Date.now()-d)*100)/100,y=h/16,p=function(f,g){for(f=String(f);f.length<g;)f=" "+f;return f};console.info("%câ± "+p(h,5)+" /"+p(m,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*y,120))+"deg 100% 31%);",t==null?void 0:t.key)}return t==null||t.onChange==null||t.onChange(a),a}}function Be(s,e){if(s===void 0)throw new Error("Unexpected undefined");return s}var _t=function(e,t){return Math.abs(e-t)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Bt=function(e){return e},Ht=function(e){for(var t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),n=[],a=t;a<=r;a++)n.push(a);return n},Nt=function(e,t){var r=e.scrollElement;if(r){var n=function(u){var l=u.width,d=u.height;t({width:Math.round(l),height:Math.round(d)})};n(r.getBoundingClientRect());var a=new ResizeObserver(function(o){var u=o[0];if(u!=null&&u.borderBoxSize){var l=u.borderBoxSize[0];if(l){n({width:l.inlineSize,height:l.blockSize});return}}n(r.getBoundingClientRect())});return a.observe(r,{box:"border-box"}),function(){a.unobserve(r)}}},Gt=function(e,t){var r=e.scrollElement;if(r){var n=function(){t(r[e.options.horizontal?"scrollLeft":"scrollTop"])};return n(),r.addEventListener("scroll",n,{passive:!0}),function(){r.removeEventListener("scroll",n)}}},$t=function(e,t,r){if(t!=null&&t.borderBoxSize){var n=t.borderBoxSize[0];if(n){var a=Math.round(n[r.options.horizontal?"inlineSize":"blockSize"]);return a}}return Math.round(e.getBoundingClientRect()[r.options.horizontal?"width":"height"])},Vt=function(e,t,r){var n,a,o=t.adjustments,u=o===void 0?0:o,l=t.behavior,d=e+u;(n=r.scrollElement)==null||n.scrollTo==null||n.scrollTo((a={},a[r.options.horizontal?"left":"top"]=d,a.behavior=l,a))},Wt=function(e){var t=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var r=null,n=function(){return r||(typeof ResizeObserver<"u"?r=new ResizeObserver(function(o){o.forEach(function(u){t._measureElement(u.target,u)})}):null)};return{disconnect:function(){var o;return(o=n())==null?void 0:o.disconnect()},observe:function(o){var u;return(u=n())==null?void 0:u.observe(o,{box:"border-box"})},unobserve:function(o){var u;return(u=n())==null?void 0:u.unobserve(o)}}}(),this.range=null,this.setOptions=function(r){Object.entries(r).forEach(function(n){var a=n[0],o=n[1];typeof o>"u"&&delete r[a]}),t.options=Ke({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Bt,rangeExtractor:Ht,onChange:function(){},measureElement:$t,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},r)},this.notify=function(r){t.options.onChange==null||t.options.onChange(t,r)},this.maybeNotify=de(function(){return t.calculateRange(),[t.isScrolling,t.range?t.range.startIndex:null,t.range?t.range.endIndex:null]},function(r){t.notify(r)},{key:!1,debug:function(){return t.options.debug},initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=function(){t.unsubs.filter(Boolean).forEach(function(r){return r()}),t.unsubs=[],t.scrollElement=null},this._didMount=function(){return t.measureElementCache.forEach(t.observer.observe),function(){t.observer.disconnect(),t.cleanup()}},this._willUpdate=function(){var r=t.options.getScrollElement();t.scrollElement!==r&&(t.cleanup(),t.scrollElement=r,t._scrollToOffset(t.scrollOffset,{adjustments:void 0,behavior:void 0}),t.unsubs.push(t.options.observeElementRect(t,function(n){t.scrollRect=n,t.maybeNotify()})),t.unsubs.push(t.options.observeElementOffset(t,function(n){t.scrollAdjustments=0,t.scrollOffset!==n&&(t.isScrollingTimeoutId!==null&&(clearTimeout(t.isScrollingTimeoutId),t.isScrollingTimeoutId=null),t.isScrolling=!0,t.scrollDirection=t.scrollOffset<n?"forward":"backward",t.scrollOffset=n,t.maybeNotify(),t.isScrollingTimeoutId=setTimeout(function(){t.isScrollingTimeoutId=null,t.isScrolling=!1,t.scrollDirection=null,t.maybeNotify()},t.options.scrollingDelay))})))},this.getSize=function(){return t.scrollRect[t.options.horizontal?"width":"height"]},this.memoOptions=de(function(){return[t.options.count,t.options.paddingStart,t.options.scrollMargin,t.options.getItemKey]},function(r,n,a,o){return t.pendingMeasuredCacheIndexes=[],{count:r,paddingStart:n,scrollMargin:a,getItemKey:o}},{key:!1}),this.getFurthestMeasurement=function(r,n){for(var a=new Map,o=new Map,u=n-1;u>=0;u--){var l=r[u];if(!a.has(l.lane)){var d=o.get(l.lane);if(d==null||l.end>d.end?o.set(l.lane,l):l.end<d.end&&a.set(l.lane,!0),a.size===t.options.lanes)break}}return o.size===t.options.lanes?Array.from(o.values()).sort(function(m,h){return m.end-h.end})[0]:void 0},this.getMeasurements=de(function(){return[t.memoOptions(),t.itemSizeCache]},function(r,n){var a=r.count,o=r.paddingStart,u=r.scrollMargin,l=r.getItemKey,d=t.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,t.pendingMeasuredCacheIndexes):0;t.pendingMeasuredCacheIndexes=[];for(var m=t.measurementsCache.slice(0,d),h=d;h<a;h++){var y=l(h),p=t.options.lanes===1?m[h-1]:t.getFurthestMeasurement(m,h),C=p?p.end:o+u,f=n.get(y),g=typeof f=="number"?f:t.options.estimateSize(h),I=C+g,P=p?p.lane:h%t.options.lanes;m[h]={index:h,start:C,size:g,end:I,key:y,lane:P}}return t.measurementsCache=m,m},{key:!1,debug:function(){return t.options.debug}}),this.calculateRange=de(function(){return[t.getMeasurements(),t.getSize(),t.scrollOffset]},function(r,n,a){return t.range=r.length>0&&n>0?Jt({measurements:r,outerSize:n,scrollOffset:a}):null},{key:!1,debug:function(){return t.options.debug}}),this.getIndexes=de(function(){return[t.options.rangeExtractor,t.calculateRange(),t.options.overscan,t.options.count]},function(r,n,a,o){return n===null?[]:r(Ke({},n,{overscan:a,count:o}))},{key:!1,debug:function(){return t.options.debug}}),this.indexFromElement=function(r){var n=t.options.indexAttribute,a=r.getAttribute(n);return a?parseInt(a,10):(console.warn("Missing attribute name '"+n+"={index}' on measured element."),-1)},this._measureElement=function(r,n){var a=t.measurementsCache[t.indexFromElement(r)];if(!a||!r.isConnected){t.measureElementCache.forEach(function(l,d){l===r&&(t.observer.unobserve(r),t.measureElementCache.delete(d))});return}var o=t.measureElementCache.get(a.key);o!==r&&(o&&t.observer.unobserve(o),t.observer.observe(r),t.measureElementCache.set(a.key,r));var u=t.options.measureElement(r,n,t);t.resizeItem(a,u)},this.resizeItem=function(r,n){var a,o=(a=t.itemSizeCache.get(r.key))!=null?a:r.size,u=n-o;u!==0&&(r.start<t.scrollOffset&&t._scrollToOffset(t.scrollOffset,{adjustments:t.scrollAdjustments+=u,behavior:void 0}),t.pendingMeasuredCacheIndexes.push(r.index),t.itemSizeCache=new Map(t.itemSizeCache.set(r.key,n)),t.notify(!1))},this.measureElement=function(r){r&&t._measureElement(r,void 0)},this.getVirtualItems=de(function(){return[t.getIndexes(),t.getMeasurements()]},function(r,n){for(var a=[],o=0,u=r.length;o<u;o++){var l=r[o],d=n[l];a.push(d)}return a},{key:!1,debug:function(){return t.options.debug}}),this.getVirtualItemForOffset=function(r){var n=t.getMeasurements();return Be(n[Pt(0,n.length-1,function(a){return Be(n[a]).start},r)])},this.getOffsetForAlignment=function(r,n){var a=t.getSize();n==="auto"&&(r<=t.scrollOffset?n="start":r>=t.scrollOffset+a?n="end":n="start"),n==="start"?r=r:n==="end"?r=r-a:n==="center"&&(r=r-a/2);var o=t.options.horizontal?"scrollWidth":"scrollHeight",u=t.scrollElement?"document"in t.scrollElement?t.scrollElement.document.documentElement[o]:t.scrollElement[o]:0,l=u-t.getSize();return Math.max(Math.min(l,r),0)},this.getOffsetForIndex=function(r,n){n===void 0&&(n="auto"),r=Math.max(0,Math.min(r,t.options.count-1));var a=Be(t.getMeasurements()[r]);if(n==="auto")if(a.end>=t.scrollOffset+t.getSize()-t.options.scrollPaddingEnd)n="end";else if(a.start<=t.scrollOffset+t.options.scrollPaddingStart)n="start";else return[t.scrollOffset,n];var o=n==="end"?a.end+t.options.scrollPaddingEnd:a.start-t.options.scrollPaddingStart;return[t.getOffsetForAlignment(o,n),n]},this.isDynamicMode=function(){return t.measureElementCache.size>0},this.cancelScrollToIndex=function(){t.scrollToIndexTimeoutId!==null&&(clearTimeout(t.scrollToIndexTimeoutId),t.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(r,n){var a=n===void 0?{}:n,o=a.align,u=o===void 0?"start":o,l=a.behavior;t.cancelScrollToIndex(),l==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t._scrollToOffset(t.getOffsetForAlignment(r,u),{adjustments:void 0,behavior:l})},this.scrollToIndex=function(r,n){var a=n===void 0?{}:n,o=a.align,u=o===void 0?"auto":o,l=a.behavior;r=Math.max(0,Math.min(r,t.options.count-1)),t.cancelScrollToIndex(),l==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var d=t.getOffsetForIndex(r,u),m=d[0],h=d[1];t._scrollToOffset(m,{adjustments:void 0,behavior:l}),l!=="smooth"&&t.isDynamicMode()&&(t.scrollToIndexTimeoutId=setTimeout(function(){t.scrollToIndexTimeoutId=null;var y=t.measureElementCache.has(t.options.getItemKey(r));if(y){var p=t.getOffsetForIndex(r,h),C=p[0];_t(C,t.scrollOffset)||t.scrollToIndex(r,{align:h,behavior:l})}else t.scrollToIndex(r,{align:h,behavior:l})}))},this.scrollBy=function(r,n){var a=n===void 0?{}:n,o=a.behavior;t.cancelScrollToIndex(),o==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t._scrollToOffset(t.scrollOffset+r,{adjustments:void 0,behavior:o})},this.getTotalSize=function(){var r;return(((r=t.getMeasurements()[t.options.count-1])==null?void 0:r.end)||t.options.paddingStart)-t.options.scrollMargin+t.options.paddingEnd},this._scrollToOffset=function(r,n){var a=n.adjustments,o=n.behavior;t.options.scrollToFn(r,{behavior:o,adjustments:a},t)},this.measure=function(){t.itemSizeCache=new Map,t.notify(!1)},this.setOptions(e),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(r){t.itemSizeCache.set(r.key,r.size)}),this.maybeNotify()},Pt=function(e,t,r,n){for(;e<=t;){var a=(e+t)/2|0,o=r(a);if(o<n)e=a+1;else if(o>n)t=a-1;else return a}return e>0?e-1:0};function Jt(s){for(var e=s.measurements,t=s.outerSize,r=s.scrollOffset,n=e.length-1,a=function(d){return e[d].start},o=Pt(0,n,a,r),u=o;u<n&&e[u].end<r+t;)u++;return{startIndex:o,endIndex:u}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Xt=typeof document<"u"?F.useLayoutEffect:F.useEffect;function Yt(s){var e=F.useReducer(function(){return{}},{})[1],t=ke({},s,{onChange:function(o,u){u?Lt.flushSync(e):e(),s.onChange==null||s.onChange(o,u)}}),r=F.useState(function(){return new Wt(t)}),n=r[0];return n.setOptions(t),F.useEffect(function(){return n._didMount()},[]),Xt(function(){return n._willUpdate()}),n}function Qs(s){return Yt(ke({observeElementRect:Nt,observeElementOffset:Gt,scrollToFn:Vt},s))}var je=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},he=typeof window>"u"||"Deno"in globalThis;function K(){}function Zt(s,e){return typeof s=="function"?s(e):s}function Ne(s){return typeof s=="number"&&s>=0&&s!==1/0}function xt(s,e){return Math.max(s+(e||0)-Date.now(),0)}function me(s,e){return typeof s=="function"?s(e):s}function B(s,e){return typeof s=="function"?s(e):s}function lt(s,e){const{type:t="all",exact:r,fetchStatus:n,predicate:a,queryKey:o,stale:u}=s;if(o){if(r){if(e.queryHash!==nt(o,e.options))return!1}else if(!Fe(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||n&&n!==e.state.fetchStatus||a&&!a(e))}function ht(s,e){const{exact:t,status:r,predicate:n,mutationKey:a}=s;if(a){if(!e.options.mutationKey)return!1;if(t){if(xe(e.options.mutationKey)!==xe(a))return!1}else if(!Fe(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||n&&!n(e))}function nt(s,e){return((e==null?void 0:e.queryKeyHashFn)||xe)(s)}function xe(s){return JSON.stringify(s,(e,t)=>$e(t)?Object.keys(t).sort().reduce((r,n)=>(r[n]=t[n],r),{}):t)}function Fe(s,e){return s===e?!0:typeof s!=typeof e?!1:s&&e&&typeof s=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Fe(s[t],e[t])):!1}function Ft(s,e){if(s===e)return s;const t=ct(s)&&ct(e);if(t||$e(s)&&$e(e)){const r=t?s:Object.keys(s),n=r.length,a=t?e:Object.keys(e),o=a.length,u=t?[]:{};let l=0;for(let d=0;d<o;d++){const m=t?d:a[d];(!t&&r.includes(m)||t)&&s[m]===void 0&&e[m]===void 0?(u[m]=void 0,l++):(u[m]=Ft(s[m],e[m]),u[m]===s[m]&&s[m]!==void 0&&l++)}return n===o&&l===n?s:u}return e}function Ge(s,e){if(!e||Object.keys(s).length!==Object.keys(e).length)return!1;for(const t in s)if(s[t]!==e[t])return!1;return!0}function ct(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function $e(s){if(!ft(s))return!1;const e=s.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!ft(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function ft(s){return Object.prototype.toString.call(s)==="[object Object]"}function es(s){return new Promise(e=>{setTimeout(e,s)})}function Ve(s,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(s,e):t.structuralSharing!==!1?Ft(s,e):e}function ts(s,e,t=0){const r=[...s,e];return t&&r.length>t?r.slice(1):r}function ss(s,e,t=0){const r=[e,...s];return t&&r.length>t?r.slice(0,-1):r}var it=Symbol();function Tt(s,e){return!s.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!s.queryFn||s.queryFn===it?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}var re,J,ve,bt,rs=(bt=class extends je{constructor(){super();v(this,re);v(this,J);v(this,ve);c(this,ve,e=>{if(!he&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){i(this,J)||this.setEventListener(i(this,ve))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,J))==null||e.call(this),c(this,J,void 0))}setEventListener(e){var t;c(this,ve,e),(t=i(this,J))==null||t.call(this),c(this,J,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){i(this,re)!==e&&(c(this,re,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof i(this,re)=="boolean"?i(this,re):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},re=new WeakMap,J=new WeakMap,ve=new WeakMap,bt),at=new rs,pe,X,ye,Ot,ns=(Ot=class extends je{constructor(){super();v(this,pe,!0);v(this,X);v(this,ye);c(this,ye,e=>{if(!he&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){i(this,X)||this.setEventListener(i(this,ye))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,X))==null||e.call(this),c(this,X,void 0))}setEventListener(e){var t;c(this,ye,e),(t=i(this,X))==null||t.call(this),c(this,X,e(this.setOnline.bind(this)))}setOnline(e){i(this,pe)!==e&&(c(this,pe,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return i(this,pe)}},pe=new WeakMap,X=new WeakMap,ye=new WeakMap,Ot),Le=new ns;function We(){let s,e;const t=new Promise((n,a)=>{s=n,e=a});t.status="pending",t.catch(()=>{});function r(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{r({status:"fulfilled",value:n}),s(n)},t.reject=n=>{r({status:"rejected",reason:n}),e(n)},t}function is(s){return Math.min(1e3*2**s,3e4)}function Dt(s){return(s??"online")==="online"?Le.isOnline():!0}var Qt=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function He(s){return s instanceof Qt}function At(s){let e=!1,t=0,r=!1,n;const a=We(),o=f=>{var g;r||(y(new Qt(f)),(g=s.abort)==null||g.call(s))},u=()=>{e=!0},l=()=>{e=!1},d=()=>at.isFocused()&&(s.networkMode==="always"||Le.isOnline())&&s.canRun(),m=()=>Dt(s.networkMode)&&s.canRun(),h=f=>{var g;r||(r=!0,(g=s.onSuccess)==null||g.call(s,f),n==null||n(),a.resolve(f))},y=f=>{var g;r||(r=!0,(g=s.onError)==null||g.call(s,f),n==null||n(),a.reject(f))},p=()=>new Promise(f=>{var g;n=I=>{(r||d())&&f(I)},(g=s.onPause)==null||g.call(s)}).then(()=>{var f;n=void 0,r||(f=s.onContinue)==null||f.call(s)}),C=()=>{if(r)return;let f;const g=t===0?s.initialPromise:void 0;try{f=g??s.fn()}catch(I){f=Promise.reject(I)}Promise.resolve(f).then(h).catch(I=>{var L;if(r)return;const P=s.retry??(he?0:3),E=s.retryDelay??is,T=typeof E=="function"?E(t,I):E,q=P===!0||typeof P=="number"&&t<P||typeof P=="function"&&P(t,I);if(e||!q){y(I);return}t++,(L=s.onFail)==null||L.call(s,t,I),es(T).then(()=>d()?void 0:p()).then(()=>{e?y(I):C()})})};return{promise:a,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:u,continueRetry:l,canStart:m,start:()=>(m()?C():p().then(C),a)}}function as(){let s=[],e=0,t=u=>{u()},r=u=>{u()},n=u=>setTimeout(u,0);const a=u=>{e?s.push(u):n(()=>{t(u)})},o=()=>{const u=s;s=[],u.length&&n(()=>{r(()=>{u.forEach(l=>{t(l)})})})};return{batch:u=>{let l;e++;try{l=u()}finally{e--,e||o()}return l},batchCalls:u=>(...l)=>{a(()=>{u(...l)})},schedule:a,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{n=u}}}var x=as(),ne,St,jt=(St=class{constructor(){v(this,ne)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ne(this.gcTime)&&c(this,ne,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(he?1/0:5*60*1e3))}clearGcTimeout(){i(this,ne)&&(clearTimeout(i(this,ne)),c(this,ne,void 0))}},ne=new WeakMap,St),ge,be,k,D,Te,ie,_,V,Ct,os=(Ct=class extends jt{constructor(e){super();v(this,_);v(this,ge);v(this,be);v(this,k);v(this,D);v(this,Te);v(this,ie);c(this,ie,!1),c(this,Te,e.defaultOptions),this.setOptions(e.options),this.observers=[],c(this,k,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,c(this,ge,us(this.options)),this.state=e.state??i(this,ge),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=i(this,D))==null?void 0:e.promise}setOptions(e){this.options={...i(this,Te),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&i(this,k).remove(this)}setData(e,t){const r=Ve(this.state.data,e,this.options);return b(this,_,V).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){b(this,_,V).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,n;const t=(r=i(this,D))==null?void 0:r.promise;return(n=i(this,D))==null||n.cancel(e),t?t.then(K).catch(K):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(this,ge))}isActive(){return this.observers.some(e=>B(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===it||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!xt(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=i(this,D))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=i(this,D))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),i(this,k).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(i(this,D)&&(i(this,ie)?i(this,D).cancel({revert:!0}):i(this,D).cancelRetry()),this.scheduleGc()),i(this,k).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||b(this,_,V).call(this,{type:"invalidate"})}fetch(e,t){var l,d,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(i(this,D))return i(this,D).continueRetry(),i(this,D).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(y=>y.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,n=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(c(this,ie,!0),r.signal)})},a=()=>{const h=Tt(this.options,t),y={queryKey:this.queryKey,meta:this.meta};return n(y),c(this,ie,!1),this.options.persister?this.options.persister(h,y,this):h(y)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};n(o),(l=this.options.behavior)==null||l.onFetch(o,this),c(this,be,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&b(this,_,V).call(this,{type:"fetch",meta:(m=o.fetchOptions)==null?void 0:m.meta});const u=h=>{var y,p,C,f;He(h)&&h.silent||b(this,_,V).call(this,{type:"error",error:h}),He(h)||((p=(y=i(this,k).config).onError)==null||p.call(y,h,this),(f=(C=i(this,k).config).onSettled)==null||f.call(C,this.state.data,h,this)),this.scheduleGc()};return c(this,D,At({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var y,p,C,f;if(h===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(g){u(g);return}(p=(y=i(this,k).config).onSuccess)==null||p.call(y,h,this),(f=(C=i(this,k).config).onSettled)==null||f.call(C,h,this.state.error,this),this.scheduleGc()},onError:u,onFail:(h,y)=>{b(this,_,V).call(this,{type:"failed",failureCount:h,error:y})},onPause:()=>{b(this,_,V).call(this,{type:"pause"})},onContinue:()=>{b(this,_,V).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),i(this,D).start()}},ge=new WeakMap,be=new WeakMap,k=new WeakMap,D=new WeakMap,Te=new WeakMap,ie=new WeakMap,_=new WeakSet,V=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...zt(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return He(n)&&n.revert&&i(this,be)?{...i(this,be),fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),x.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),i(this,k).notify({query:this,type:"updated",action:e})})},Ct);function zt(s,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Dt(e.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function us(s){const e=typeof s.initialData=="function"?s.initialData():s.initialData,t=e!==void 0,r=t?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var H,wt,ls=(wt=class extends je{constructor(e={}){super();v(this,H);this.config=e,c(this,H,new Map)}build(e,t,r){const n=t.queryKey,a=t.queryHash??nt(n,t);let o=this.get(a);return o||(o=new os({cache:this,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){i(this,H).has(e.queryHash)||(i(this,H).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=i(this,H).get(e.queryHash);t&&(e.destroy(),t===e&&i(this,H).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){x.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,H).get(e)}getAll(){return[...i(this,H).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>lt(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>lt(e,r)):t}notify(e){x.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){x.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){x.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},H=new WeakMap,wt),N,A,ae,G,W,Et,hs=(Et=class extends jt{constructor(e){super();v(this,G);v(this,N);v(this,A);v(this,ae);this.mutationId=e.mutationId,c(this,A,e.mutationCache),c(this,N,[]),this.state=e.state||cs(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){i(this,N).includes(e)||(i(this,N).push(e),this.clearGcTimeout(),i(this,A).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){c(this,N,i(this,N).filter(t=>t!==e)),this.scheduleGc(),i(this,A).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){i(this,N).length||(this.state.status==="pending"?this.scheduleGc():i(this,A).remove(this))}continue(){var e;return((e=i(this,ae))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var n,a,o,u,l,d,m,h,y,p,C,f,g,I,P,E,T,q,L,Q;c(this,ae,At({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,w)=>{b(this,G,W).call(this,{type:"failed",failureCount:M,error:w})},onPause:()=>{b(this,G,W).call(this,{type:"pause"})},onContinue:()=>{b(this,G,W).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(this,A).canRun(this)}));const t=this.state.status==="pending",r=!i(this,ae).canStart();try{if(!t){b(this,G,W).call(this,{type:"pending",variables:e,isPaused:r}),await((a=(n=i(this,A).config).onMutate)==null?void 0:a.call(n,e,this));const w=await((u=(o=this.options).onMutate)==null?void 0:u.call(o,e));w!==this.state.context&&b(this,G,W).call(this,{type:"pending",context:w,variables:e,isPaused:r})}const M=await i(this,ae).start();return await((d=(l=i(this,A).config).onSuccess)==null?void 0:d.call(l,M,e,this.state.context,this)),await((h=(m=this.options).onSuccess)==null?void 0:h.call(m,M,e,this.state.context)),await((p=(y=i(this,A).config).onSettled)==null?void 0:p.call(y,M,null,this.state.variables,this.state.context,this)),await((f=(C=this.options).onSettled)==null?void 0:f.call(C,M,null,e,this.state.context)),b(this,G,W).call(this,{type:"success",data:M}),M}catch(M){try{throw await((I=(g=i(this,A).config).onError)==null?void 0:I.call(g,M,e,this.state.context,this)),await((E=(P=this.options).onError)==null?void 0:E.call(P,M,e,this.state.context)),await((q=(T=i(this,A).config).onSettled)==null?void 0:q.call(T,void 0,M,this.state.variables,this.state.context,this)),await((Q=(L=this.options).onSettled)==null?void 0:Q.call(L,void 0,M,e,this.state.context)),M}finally{b(this,G,W).call(this,{type:"error",error:M})}}finally{i(this,A).runNext(this)}}},N=new WeakMap,A=new WeakMap,ae=new WeakMap,G=new WeakSet,W=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),x.batch(()=>{i(this,N).forEach(r=>{r.onMutationUpdate(e)}),i(this,A).notify({mutation:this,type:"updated",action:e})})},Et);function cs(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var U,De,Rt,fs=(Rt=class extends je{constructor(e={}){super();v(this,U);v(this,De);this.config=e,c(this,U,new Map),c(this,De,Date.now())}build(e,t,r){const n=new hs({mutationCache:this,mutationId:++qe(this,De)._,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){const t=Ue(e),r=i(this,U).get(t)??[];r.push(e),i(this,U).set(t,r),this.notify({type:"added",mutation:e})}remove(e){var r;const t=Ue(e);if(i(this,U).has(t)){const n=(r=i(this,U).get(t))==null?void 0:r.filter(a=>a!==e);n&&(n.length===0?i(this,U).delete(t):i(this,U).set(t,n))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const t=(r=i(this,U).get(Ue(e)))==null?void 0:r.find(n=>n.state.status==="pending");return!t||t===e}runNext(e){var r;const t=(r=i(this,U).get(Ue(e)))==null?void 0:r.find(n=>n!==e&&n.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){x.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...i(this,U).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>ht(t,r))}findAll(e={}){return this.getAll().filter(t=>ht(e,t))}notify(e){x.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return x.batch(()=>Promise.all(e.map(t=>t.continue().catch(K))))}},U=new WeakMap,De=new WeakMap,Rt);function Ue(s){var e;return((e=s.options.scope)==null?void 0:e.id)??String(s.mutationId)}function dt(s){return{onFetch:(e,t)=>{var m,h,y,p,C;const r=e.options,n=(y=(h=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:h.fetchMore)==null?void 0:y.direction,a=((p=e.state.data)==null?void 0:p.pages)||[],o=((C=e.state.data)==null?void 0:C.pageParams)||[];let u={pages:[],pageParams:[]},l=0;const d=async()=>{let f=!1;const g=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?f=!0:e.signal.addEventListener("abort",()=>{f=!0}),e.signal)})},I=Tt(e.options,e.fetchOptions),P=async(E,T,q)=>{if(f)return Promise.reject();if(T==null&&E.pages.length)return Promise.resolve(E);const L={queryKey:e.queryKey,pageParam:T,direction:q?"backward":"forward",meta:e.options.meta};g(L);const Q=await I(L),{maxPages:M}=e.options,w=q?ss:ts;return{pages:w(E.pages,Q,M),pageParams:w(E.pageParams,T,M)}};if(n&&a.length){const E=n==="backward",T=E?ds:mt,q={pages:a,pageParams:o},L=T(r,q);u=await P(q,L,E)}else{const E=s??a.length;do{const T=l===0?o[0]??r.initialPageParam:mt(r,u);if(l>0&&T==null)break;u=await P(u,T),l++}while(l<E)}return u};e.options.persister?e.fetchFn=()=>{var f,g;return(g=(f=e.options).persister)==null?void 0:g.call(f,d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function mt(s,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?s.getNextPageParam(e[r],e,t[r],t):void 0}function ds(s,{pages:e,pageParams:t}){var r;return e.length>0?(r=s.getPreviousPageParam)==null?void 0:r.call(s,e[0],e,t[0],t):void 0}var R,Y,Z,Oe,Se,ee,Ce,we,Mt,As=(Mt=class{constructor(s={}){v(this,R);v(this,Y);v(this,Z);v(this,Oe);v(this,Se);v(this,ee);v(this,Ce);v(this,we);c(this,R,s.queryCache||new ls),c(this,Y,s.mutationCache||new fs),c(this,Z,s.defaultOptions||{}),c(this,Oe,new Map),c(this,Se,new Map),c(this,ee,0)}mount(){qe(this,ee)._++,i(this,ee)===1&&(c(this,Ce,at.subscribe(async s=>{s&&(await this.resumePausedMutations(),i(this,R).onFocus())})),c(this,we,Le.subscribe(async s=>{s&&(await this.resumePausedMutations(),i(this,R).onOnline())})))}unmount(){var s,e;qe(this,ee)._--,i(this,ee)===0&&((s=i(this,Ce))==null||s.call(this),c(this,Ce,void 0),(e=i(this,we))==null||e.call(this),c(this,we,void 0))}isFetching(s){return i(this,R).findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return i(this,Y).findAll({...s,status:"pending"}).length}getQueryData(s){var t;const e=this.defaultQueryOptions({queryKey:s});return(t=i(this,R).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(s){const e=this.getQueryData(s.queryKey);if(e===void 0)return this.fetchQuery(s);{const t=this.defaultQueryOptions(s),r=i(this,R).build(this,t);return s.revalidateIfStale&&r.isStaleByTime(me(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(s){return i(this,R).findAll(s).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(s,e,t){const r=this.defaultQueryOptions({queryKey:s}),n=i(this,R).get(r.queryHash),a=n==null?void 0:n.state.data,o=Zt(e,a);if(o!==void 0)return i(this,R).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(s,e,t){return x.batch(()=>i(this,R).findAll(s).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(s){var t;const e=this.defaultQueryOptions({queryKey:s});return(t=i(this,R).get(e.queryHash))==null?void 0:t.state}removeQueries(s){const e=i(this,R);x.batch(()=>{e.findAll(s).forEach(t=>{e.remove(t)})})}resetQueries(s,e){const t=i(this,R),r={type:"active",...s};return x.batch(()=>(t.findAll(s).forEach(n=>{n.reset()}),this.refetchQueries(r,e)))}cancelQueries(s={},e={}){const t={revert:!0,...e},r=x.batch(()=>i(this,R).findAll(s).map(n=>n.cancel(t)));return Promise.all(r).then(K).catch(K)}invalidateQueries(s={},e={}){return x.batch(()=>{if(i(this,R).findAll(s).forEach(r=>{r.invalidate()}),s.refetchType==="none")return Promise.resolve();const t={...s,type:s.refetchType??s.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(s={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=x.batch(()=>i(this,R).findAll(s).filter(n=>!n.isDisabled()).map(n=>{let a=n.fetch(void 0,t);return t.throwOnError||(a=a.catch(K)),n.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(K)}fetchQuery(s){const e=this.defaultQueryOptions(s);e.retry===void 0&&(e.retry=!1);const t=i(this,R).build(this,e);return t.isStaleByTime(me(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(K).catch(K)}fetchInfiniteQuery(s){return s.behavior=dt(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(K).catch(K)}ensureInfiniteQueryData(s){return s.behavior=dt(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Le.isOnline()?i(this,Y).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,R)}getMutationCache(){return i(this,Y)}getDefaultOptions(){return i(this,Z)}setDefaultOptions(s){c(this,Z,s)}setQueryDefaults(s,e){i(this,Oe).set(xe(s),{queryKey:s,defaultOptions:e})}getQueryDefaults(s){const e=[...i(this,Oe).values()];let t={};return e.forEach(r=>{Fe(s,r.queryKey)&&(t={...t,...r.defaultOptions})}),t}setMutationDefaults(s,e){i(this,Se).set(xe(s),{mutationKey:s,defaultOptions:e})}getMutationDefaults(s){const e=[...i(this,Se).values()];let t={};return e.forEach(r=>{Fe(s,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(s){if(s._defaulted)return s;const e={...i(this,Z).queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return e.queryHash||(e.queryHash=nt(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===it&&(e.enabled=!1),e}defaultMutationOptions(s){return s!=null&&s._defaulted?s:{...i(this,Z).mutations,...(s==null?void 0:s.mutationKey)&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){i(this,R).clear(),i(this,Y).clear()}},R=new WeakMap,Y=new WeakMap,Z=new WeakMap,Oe=new WeakMap,Se=new WeakMap,ee=new WeakMap,Ce=new WeakMap,we=new WeakMap,Mt),z,O,Qe,j,oe,Ee,te,$,Ae,Re,Me,ue,le,se,Ie,S,Pe,Je,Xe,Ye,Ze,et,tt,st,qt,It,ms=(It=class extends je{constructor(e,t){super();v(this,S);v(this,z);v(this,O);v(this,Qe);v(this,j);v(this,oe);v(this,Ee);v(this,te);v(this,$);v(this,Ae);v(this,Re);v(this,Me);v(this,ue);v(this,le);v(this,se);v(this,Ie,new Set);this.options=t,c(this,z,e),c(this,$,null),c(this,te,We()),this.options.experimental_prefetchInRender||i(this,te).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,O).addObserver(this),vt(i(this,O),this.options)?b(this,S,Pe).call(this):this.updateResult(),b(this,S,Ze).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rt(i(this,O),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rt(i(this,O),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,b(this,S,et).call(this),b(this,S,tt).call(this),i(this,O).removeObserver(this)}setOptions(e,t){const r=this.options,n=i(this,O);if(this.options=i(this,z).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof B(this.options.enabled,i(this,O))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");b(this,S,st).call(this),i(this,O).setOptions(this.options),r._defaulted&&!Ge(this.options,r)&&i(this,z).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,O),observer:this});const a=this.hasListeners();a&&pt(i(this,O),n,this.options,r)&&b(this,S,Pe).call(this),this.updateResult(t),a&&(i(this,O)!==n||B(this.options.enabled,i(this,O))!==B(r.enabled,i(this,O))||me(this.options.staleTime,i(this,O))!==me(r.staleTime,i(this,O)))&&b(this,S,Je).call(this);const o=b(this,S,Xe).call(this);a&&(i(this,O)!==n||B(this.options.enabled,i(this,O))!==B(r.enabled,i(this,O))||o!==i(this,se))&&b(this,S,Ye).call(this,o)}getOptimisticResult(e){const t=i(this,z).getQueryCache().build(i(this,z),e),r=this.createResult(t,e);return ps(this,r)&&(c(this,j,r),c(this,Ee,this.options),c(this,oe,i(this,O).state)),r}getCurrentResult(){return i(this,j)}trackResult(e,t){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),t==null||t(n),e[n])})}),r}trackProp(e){i(this,Ie).add(e)}getCurrentQuery(){return i(this,O)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=i(this,z).defaultQueryOptions(e),r=i(this,z).getQueryCache().build(i(this,z),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return b(this,S,Pe).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,j)))}createResult(e,t){var M;const r=i(this,O),n=this.options,a=i(this,j),o=i(this,oe),u=i(this,Ee),d=e!==r?e.state:i(this,Qe),{state:m}=e;let h={...m},y=!1,p;if(t._optimisticResults){const w=this.hasListeners(),ce=!w&&vt(e,t),fe=w&&pt(e,r,t,n);(ce||fe)&&(h={...h,...zt(m.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:C,errorUpdatedAt:f,status:g}=h;if(t.select&&h.data!==void 0)if(a&&h.data===(o==null?void 0:o.data)&&t.select===i(this,Ae))p=i(this,Re);else try{c(this,Ae,t.select),p=t.select(h.data),p=Ve(a==null?void 0:a.data,p,t),c(this,Re,p),c(this,$,null)}catch(w){c(this,$,w)}else p=h.data;if(t.placeholderData!==void 0&&p===void 0&&g==="pending"){let w;if(a!=null&&a.isPlaceholderData&&t.placeholderData===(u==null?void 0:u.placeholderData))w=a.data;else if(w=typeof t.placeholderData=="function"?t.placeholderData((M=i(this,Me))==null?void 0:M.state.data,i(this,Me)):t.placeholderData,t.select&&w!==void 0)try{w=t.select(w),c(this,$,null)}catch(ce){c(this,$,ce)}w!==void 0&&(g="success",p=Ve(a==null?void 0:a.data,w,t),y=!0)}i(this,$)&&(C=i(this,$),p=i(this,Re),f=Date.now(),g="error");const I=h.fetchStatus==="fetching",P=g==="pending",E=g==="error",T=P&&I,q=p!==void 0,Q={status:g,fetchStatus:h.fetchStatus,isPending:P,isSuccess:g==="success",isError:E,isInitialLoading:T,isLoading:T,data:p,dataUpdatedAt:h.dataUpdatedAt,error:C,errorUpdatedAt:f,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:I,isRefetching:I&&!P,isLoadingError:E&&!q,isPaused:h.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:E&&q,isStale:ot(e,t),refetch:this.refetch,promise:i(this,te)};if(this.options.experimental_prefetchInRender){const w=ze=>{Q.status==="error"?ze.reject(Q.error):Q.data!==void 0&&ze.resolve(Q.data)},ce=()=>{const ze=c(this,te,Q.promise=We());w(ze)},fe=i(this,te);switch(fe.status){case"pending":e.queryHash===r.queryHash&&w(fe);break;case"fulfilled":(Q.status==="error"||Q.data!==fe.value)&&ce();break;case"rejected":(Q.status!=="error"||Q.error!==fe.reason)&&ce();break}}return Q}updateResult(e){const t=i(this,j),r=this.createResult(i(this,O),this.options);if(c(this,oe,i(this,O).state),c(this,Ee,this.options),i(this,oe).data!==void 0&&c(this,Me,i(this,O)),Ge(r,t))return;c(this,j,r);const n={},a=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,u=typeof o=="function"?o():o;if(u==="all"||!u&&!i(this,Ie).size)return!0;const l=new Set(u??i(this,Ie));return this.options.throwOnError&&l.add("error"),Object.keys(i(this,j)).some(d=>{const m=d;return i(this,j)[m]!==t[m]&&l.has(m)})};(e==null?void 0:e.listeners)!==!1&&a()&&(n.listeners=!0),b(this,S,qt).call(this,{...n,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&b(this,S,Ze).call(this)}},z=new WeakMap,O=new WeakMap,Qe=new WeakMap,j=new WeakMap,oe=new WeakMap,Ee=new WeakMap,te=new WeakMap,$=new WeakMap,Ae=new WeakMap,Re=new WeakMap,Me=new WeakMap,ue=new WeakMap,le=new WeakMap,se=new WeakMap,Ie=new WeakMap,S=new WeakSet,Pe=function(e){b(this,S,st).call(this);let t=i(this,O).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(K)),t},Je=function(){b(this,S,et).call(this);const e=me(this.options.staleTime,i(this,O));if(he||i(this,j).isStale||!Ne(e))return;const r=xt(i(this,j).dataUpdatedAt,e)+1;c(this,ue,setTimeout(()=>{i(this,j).isStale||this.updateResult()},r))},Xe=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,O)):this.options.refetchInterval)??!1},Ye=function(e){b(this,S,tt).call(this),c(this,se,e),!(he||B(this.options.enabled,i(this,O))===!1||!Ne(i(this,se))||i(this,se)===0)&&c(this,le,setInterval(()=>{(this.options.refetchIntervalInBackground||at.isFocused())&&b(this,S,Pe).call(this)},i(this,se)))},Ze=function(){b(this,S,Je).call(this),b(this,S,Ye).call(this,b(this,S,Xe).call(this))},et=function(){i(this,ue)&&(clearTimeout(i(this,ue)),c(this,ue,void 0))},tt=function(){i(this,le)&&(clearInterval(i(this,le)),c(this,le,void 0))},st=function(){const e=i(this,z).getQueryCache().build(i(this,z),this.options);if(e===i(this,O))return;const t=i(this,O);c(this,O,e),c(this,Qe,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},qt=function(e){x.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(i(this,j))}),i(this,z).getQueryCache().notify({query:i(this,O),type:"observerResultsUpdated"})})},It);function vs(s,e){return B(e.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&e.retryOnMount===!1)}function vt(s,e){return vs(s,e)||s.state.data!==void 0&&rt(s,e,e.refetchOnMount)}function rt(s,e,t){if(B(e.enabled,s)!==!1){const r=typeof t=="function"?t(s):t;return r==="always"||r!==!1&&ot(s,e)}return!1}function pt(s,e,t,r){return(s!==e||B(r.enabled,s)===!1)&&(!t.suspense||s.state.status!=="error")&&ot(s,t)}function ot(s,e){return B(e.enabled,s)!==!1&&s.isStaleByTime(me(e.staleTime,s))}function ps(s,e){return!Ge(s.getCurrentResult(),e)}var Ut=F.createContext(void 0),ys=s=>{const e=F.useContext(Ut);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},js=({client:s,children:e})=>(F.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),Kt.jsx(Ut.Provider,{value:s,children:e})),kt=F.createContext(!1),gs=()=>F.useContext(kt);kt.Provider;function bs(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Os=F.createContext(bs()),Ss=()=>F.useContext(Os);function Cs(s,e){return typeof s=="function"?s(...e):!!s}function yt(){}var ws=(s,e)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(e.isReset()||(s.retryOnMount=!1))},Es=s=>{F.useEffect(()=>{s.clearReset()},[s])},Rs=({result:s,errorResetBoundary:e,throwOnError:t,query:r})=>s.isError&&!e.isReset()&&!s.isFetching&&r&&Cs(t,[s.error,r]),Ms=s=>{s.suspense&&(s.staleTime===void 0&&(s.staleTime=1e3),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3)))},Is=(s,e)=>s.isLoading&&s.isFetching&&!e,Ps=(s,e)=>(s==null?void 0:s.suspense)&&e.isPending,gt=(s,e,t)=>e.fetchOptimistic(s).catch(()=>{t.clearReset()});function xs(s,e,t){var m,h,y,p,C;const r=ys(),n=gs(),a=Ss(),o=r.defaultQueryOptions(s);(h=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||h.call(m,o),o._optimisticResults=n?"isRestoring":"optimistic",Ms(o),ws(o,a),Es(a);const u=!r.getQueryCache().get(o.queryHash),[l]=F.useState(()=>new e(r,o)),d=l.getOptimisticResult(o);if(F.useSyncExternalStore(F.useCallback(f=>{const g=n?yt:l.subscribe(x.batchCalls(f));return l.updateResult(),g},[l,n]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),F.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),Ps(o,d))throw gt(o,l,a);if(Rs({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw d.error;if((p=(y=r.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||p.call(y,o,d),o.experimental_prefetchInRender&&!he&&Is(d,n)){const f=u?gt(o,l,a):(C=r.getQueryCache().get(o.queryHash))==null?void 0:C.promise;f==null||f.catch(yt).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?d:l.trackResult(d)}function zs(s,e){return xs(s,ms)}export{As as Q,zs as a,ys as b,js as c,Qs as u};
//# sourceMappingURL=@tanstack-ku59xrFY.js.map
